#Paffs
import os
from cmath import isnan

Import('envGlobal')

print("PAFFS")

envGlobal.Append(CPPPATH=[os.path.abspath('.')])

envGlobal.SConscript([
	os.path.join('$OUTPOST_CORE_PATH', 'modules/SConscript.library'),
	], exports='envGlobal')

if not envGlobal['PAFFSCONFIG']:
	print('No configuration set!')
	envGlobal['PAFFSCONFIG'] = 'default'
else:
	print('Paffs configuration: ' + str(envGlobal['PAFFSCONFIG']))

envGlobal.Append(CPPPATH=[
	os.path.join(os.path.abspath("./config/"), '$PAFFSCONFIG')
])

env = envGlobal.Clone()

files  = env.Glob('*.cpp')

#for file in files:
#    print (file)

library = env.StaticLibrary('paffs', files)

envGlobal.Append(LIBS=[
	'paffs',
	'outpost_rtos',
	'outpost_time',
])

envGlobal.Install('$BUILDPATH/lib', library)
