#Paffs drivers
import os

Import('envGlobal')

print("ARTIXDRIVER")

artix7path = os.path.join('$EXTPATH', 'artix7')

envGlobal.Append(CPPPATH=[
	artix7path,
])

envGlobal.SConscript([
        os.path.join(envGlobal['OUTPOST_PLATFORM_PATH'], 'modules/hal/src/SConscript'),
    ],
    exports='envGlobal'
)

env = envGlobal.Clone()

files  = [
    'office_model_2_artix7.cpp',
    'yaffs_ecc.cpp'
]
files.extend(env.Glob(artix7path+'/*.cpp'))

library = env.StaticLibrary('artixDriver', files)

envGlobal.Append(LIBS=[
	'artixDriver',
	'outpost_leon',
	'outpost_hal',
	'outpost_rtos',
	'outpost_utils',
])

print(envGlobal['LIBS'])

envGlobal.Install('$BUILDPATH/lib', library)
